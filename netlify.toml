[build]
  # 發布目錄（前端文件）
  publish = "frontend"
  
  # 構建命令：將數據庫文件複製到函數目錄，確保函數可以訪問
  command = "cp restaurants_database.json netlify/functions/restaurants_database.json || echo 'Warning: Could not copy database file'"

# Netlify Functions 配置
[functions]
  # Functions 目錄
  directory = "netlify/functions"

# 重定向規則（將 API 請求重定向到 Functions）
# 將所有 /api/restaurants/* 請求重定向到 Netlify Function
[[redirects]]
  from = "/api/restaurants/*"
  to = "/.netlify/functions/restaurants"
  status = 200
  force = true

# SPA 路由支持（所有非 API 請求都返回 index.html）
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
